<!DOCTYPE html>
<html data-bs-theme="light" lang="ko" dir="ltr" xmlns:th="http://www.thymeleaf.org">
	
<th:block th:fragment="loveModal">
  <div class="modal fade" id="modal" tabindex="-1" aria-labelledby="activityModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
		<div class="modal-header d-flex justify-content-between align-items-center">
		  <h5 class="modal-title mb-0" id="activityModalLabel">VIP</h5>
		  <div class="d-flex align-items-center gap-2">
		    <div class="input-group" style="max-width: 150px;">
		      <span class="input-group-text">쿠키</span>
		      <input type="text" 
		             class="form-control"
		             th:value="${item.userPeanut}" 
		             placeholder="쿠키 갯수" 
		             disabled 
		             style="background-color: white;" />
		    </div>
		    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
		  </div>
		</div>     
		<div class="modal-body">
		  <div class="input-group d-flex" style="max-width: 400px; margin: 0 auto; border-radius: 2rem; overflow: hidden;">
		    <span class="form-control bg-white flex-grow-2"
		          style="border-right: 0;
		                 border-top-left-radius: 2rem;
		                 border-bottom-left-radius: 2rem;
		                 flex: 2;
		                 white-space: nowrap;
		                 overflow: hidden;
		                 text-overflow: ellipsis;">
		      프로필 보기
		    </span>
		    <button type="button" id="submitOotdBtn" class="main-btn flex-grow-1"
		            style="border-top-left-radius: 0;
		                   border-bottom-left-radius: 0;
		                   border-top-right-radius: 2rem;
		                   border-bottom-right-radius: 2rem;
		                   flex: 1;" data-required="5">
		      <i class="fas fa-cookie"></i> 5개
		    </button>
		  </div>
		  <div class="input-group d-flex mt-3" style="max-width: 400px; margin: 0 auto; border-radius: 2rem; overflow: hidden;">
		    <span class="form-control bg-white flex-grow-2"
		          style="border-right: 0;
		                 border-top-left-radius: 2rem;
		                 border-bottom-left-radius: 2rem;
		                 flex: 2;
		                 white-space: nowrap;
		                 overflow: hidden;
		                 text-overflow: ellipsis;">
		      1:1 채팅
		    </span>
		    <button type="button" id="submitOotdBtn" class="main-btn flex-grow-1"
		            style="border-top-left-radius: 0;
		                   border-bottom-left-radius: 0;
		                   border-top-right-radius: 2rem;
		                   border-bottom-right-radius: 2rem;
		                   flex: 1;" data-required="15">
		      <i class="fas fa-cookie"></i> 15개
		    </button>
		  </div>
		</div>     
        <div class="modal-footer">
  		  <button type="button" id="submitOotdBtn" class="main-btn">쿠키가 모자르다면?</button>
        </div>
      </div>
    </div>
  </div>
  <script>
	document.addEventListener("DOMContentLoaded", function () {
	  const peanutInput = document.querySelector('input.form-control[disabled]');
	  const userPeanut = parseInt(peanutInput.value);

	  document.querySelectorAll(".main-btn").forEach(button => {
	    button.addEventListener("click", function () {
	      const required = parseInt(this.dataset.required);

	      document.querySelectorAll(".validation-msg").forEach(msg => msg.remove());

	      if (userPeanut < required) {
	        const msg = document.createElement("span");
	        msg.className = "text-danger validation-msg d-block mt-1";
	        msg.textContent = "쿠키 갯수가 부족합니다.";

	        this.closest(".input-group").insertAdjacentElement("afterend", msg);
	      } else {
	        console.log("요청 가능");
	      }
	    });
	  });
	});
  </script>
</th:block>